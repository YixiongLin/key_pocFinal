@model key_pocFinal.Service.productList

@{
    ViewBag.Title = "list";
    Layout = "~/Views/Shared/_ProductLayout.cshtml";
}

<script src="https://kit.fontawesome.com/f63e03ff52.js"></script>
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $(function () {
            var minValue1 = parseInt($(".col-1 #min1").val(),10);
            var maxValue1 = parseInt($(".col-1 #max1").val(),10);
            var left1 = minValue1 + minValue1 / 10;
            var right1 = maxValue1 - maxValue1 / 10;
            $("#slider-range-1").slider({
                range: true,
                min: minValue1,
                max: maxValue1,
                values: [left1, right1],
                slide: function (event, ui) {
                    $("#minAmount_1").val(ui.values[0]);
                    $("#maxAmount_1").val(ui.values[1]);
                }
            });
            $("#minAmount_1").val($("#slider-range-1").slider("values", 0));
            $("#maxAmount_1").val($("#slider-range-1").slider("values", 1));
        });
        $(function () {
            var minValue2 = parseInt($(".col-1 #min2").val(),10);
            var maxValue2 = parseInt($(".col-1 #max2").val(),10);
            var left2 = minValue2 + minValue2 / 10;
            var right2 = maxValue2 - maxValue2 / 10;
            $("#slider-range-2").slider({
                range: true,
                min: minValue2,
                max: maxValue2,
                values: [left2, right2],
                slide: function (event, ui) {
                    $("#minAmount_2").val(ui.values[0]);
                    $("#maxAmount_2").val(ui.values[1]);
                }
            });
            $("#minAmount_2").val($("#slider-range-2").slider("values", 0));
            $("#maxAmount_2").val($("#slider-range-2").slider("values", 1));
            $(function () {
                var minValue3 = parseInt($(".col-1 #min3").val(), 10);
                var maxValue3 = parseInt($(".col-1 #max3").val(), 10);
                var left3 = minValue3 + minValue3 / 10;
                var right3 = maxValue3 - maxValue3 / 10;
                $("#slider-range-3").slider({
                    range: true,
                    min: minValue3,
                    max: maxValue3,
                    values: [left3, right3],
                    slide: function (event, ui) {
                        $("#minAmount_3").val(ui.values[0]);
                        $("#maxAmount_3").val(ui.values[1]);
                    }
                });
                $("#minAmount_3").val($("#slider-range-3").slider("values", 0));
                $("#maxAmount_3").val($("#slider-range-3").slider("values", 1));
            });
            $(function () {
                var minValue4 = parseInt($(".col-1 #min4").val(), 10);
                var maxValue4 = parseInt($(".col-1 #max4").val(), 10);
                var left4 = minValue4 + minValue4 / 10;
                var right4 = maxValue4 - maxValue4 / 10;
                $("#slider-range-4").slider({
                    range: true,
                    min: minValue4,
                    max: maxValue4,
                    values: [left4, right4],
                    slide: function (event, ui) {
                        $("#minAmount_4").val(ui.values[0]);
                        $("#maxAmount_4").val(ui.values[1]);
                    }
                });
                $("#minAmount_4").val($("#slider-range-4").slider("values", 0));
                $("#maxAmount_4").val($("#slider-range-4").slider("values", 1));
            });
        });

    });

</script>
<style>
    #saveBtn {
        background: #6BCAF8;
        color: white;
        border-color: #6BCAF8;
        padding: 5px 20px;
        margin-left: 18px;
    }

    #clearBtn {
        background: #6BCAF8;
        color: white;
        border-color: #6BCAF8;
        padding: 5px 20px;
        margin-left: 10px;
    }

    #submitCompare {
        float: right;
    }
</style>
<div class="row" style="height:100%;">
    <div class="col-12 col-sm-6 col-xl-3 border">
        @using (Html.BeginForm("filter", "Product", FormMethod.Post))
        {
            <div class="form-group" style="margin-top:20px;">
                <span style="margin-left: 20px; margin-right: 10px;">Search: </span>
                <button id="saveBtn" type="submit">Save</button>
                <a id="clearBtn" href='@Url.Action("clearFilter","Product")'>Clear</a>
            </div>
            <div class="row form-group" style="height:35px;">
                <div class="col-6 text-center border">
                    <p style="margin-top:5px;">Product</p>
                </div>
                <div class="col-6 text-center border-top border-bottom" style="width:100%;">
                    <p style="margin-top:5px;">Project</p>
                </div>
            </div>
            <div class="form-group" style="height:30px;">
                <span style="margin-left: 15px;">Product Type</span>
                <button class="btn btn-light" style="background:white;margin-left:120px;" data-toggle="collapse" data-target="#modelYearFilter" aria-expanded="false" aria-controls="modelYearFilter"><i class="fas fa-caret-down"></i></button>
            </div>
            <div class="form-group border-top" style="height:30px" id="modelYearFilter">
                <div style="margin-top: 8px;">
                    <span style="margin-left:20px; font-weight:bold;">Model Year: </span>
                    <input type="text" id="startYear" name="startYear" style="width:70px; margin-left:20px;" />
                    @*@Html.TextBoxFor(Model => Model.startYear, new { @style = "width:70px; margin-left:20px;" })*@
                    <span> - </span>
                    <input type="text" id="endYear" name="endYear" style="width:70px;" />
                    @*@Html.TextBoxFor(Model => Model.endYear, new { @style = "width:70px;" })*@
                </div>
            </div>
            <div class="form-group border-top" style="height:50px;">
                <div style="margin-top:16px;">
                    <span style="margin-left: 15px;">Technical Specifications</span>
                    <button class="btn btn-light" style="background:white;margin-left:50px;" data-toggle="collapse" data-target="#technicalSpecFilter" aria-expanded="false" aria-controls="technicalSpecFilter"><i class="fas fa-caret-down"></i></button>
                </div>

            </div>
            <div class="form-group border-top" id="technicalSpecFilter">
                @{
                    var index = 1;
                    var count = 0;
                    while (index < 5 && count < Model.getPropertyList().Count)
                    {
                        if (Model.getPropertyList()[count].Contains("Min") == false)
                        {
                            <div style="margin-top:16px;">
                                <img src="~/IMG/exchangeIcon.png" style="width:20px;height:20px; margin-left:25px;" />
                                <span style="margin-left:20px;">@Model.getPropertyList()[count]</span>
                                <br />
                                <div class="row text-justify" style="width:100%;" id="filter_@Model.getPropertyList()[count]">
                                    <div class="col-1" style="margin-left:5px;">
                                        @Html.Hidden("min" + index.ToString(), Model.getMinValue(Model.getSubcategoryID(), Model.getPropertyList()[count]), new { @id = "min" + index.ToString() })
                                        @Html.Hidden("max" + index.ToString(), Model.getMaxValue(Model.getSubcategoryID(), Model.getPropertyList()[count]), new { @id = "max" + index.ToString() })
                                        <input type="text" id="minAmount_@index" name="minAmount_@index" readonly style="border:0; width:40px;">
                                        @*@Html.TextBox("minAmount_" + index.ToString());*@
                                    </div>
                                    <div class="col-9 text-center">
                                        <div id="slider-range-@index" style="width:100%; margin-left: 10px; margin-top: 8px;"></div>
                                    </div>
                                    <div class="col-1">
                                        <input type="text" id="maxAmount_@index" name="maxAmount_@index" readonly style="border:0; width:40px;">
                                        @*@Html.TextBox("maxAmount_" + index.ToString());*@
                                    </div>
                                </div>
                            </div>
                            index++;
                        }
                        count++;
                    }
                }
            </div>
        }
    </div>
    <div class="col-12 col-sm-6 col-xl-9">
        @using (Html.BeginForm("compareProducts", "Product", FormMethod.Post))
        {

            <div>
                <span>@Model.getCategoryNameBySubID(Model.getSubcategoryID()) > @Model.getSubcategoryName()</span>
                <button class="btn btn-info" type="submit" id="submitCompare">Compare</button>
            </div>

            <div class="container" style="margin-top:20px;">
                <div class="row justify-content-around">
                    @foreach (var product in Model.getProductsList())
                    {
                        <div class="card" style="width: 18rem;">
                            <a href="@Url.Action("displayProduct", "Product", new { id = product.ID })"><img class="card-img-top" src="@product.ProductImage" style="width:100%;height:200px;"></a>
                            <div class="card-body">
                                <h5 class="card-title" style="text-align:center">@product.tblProductDescription.Manufacture</h5>
                                <h5 class="card-title" style="text-align:center">@product.tblProductDescription.Series</h5>
                                <h5 class="card-title" style="text-align:center">@product.tblProductDescription.Model</h5>
                                @foreach (string property in Model.getFilterProperties())
                                {
                                    <p class="card-text" style="text-align:center">@Model.getPropertyValue(product.ID, property) @property</p>
                                }
                                <span>Compare to: @Html.CheckBox("product" + product.ID)</span>
                                @*<input type="checkbox" class="compareBox" name="compareProducts" value="product_@product.ID" />*@
                                <button class="btn btn-primary" style="float:right;">Add to</button>
                            </div>
                        </div>
                    }
                </div>
            </div>
        }
    </div>
</div>

